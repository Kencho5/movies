<div class="container mx-auto px-4 py-4 md:px-8 md:py-8">
  <!-- Featured Hero Section -->
  <section class="relative mb-10 sm:mb-12 md:mb-20">
    @if (loading()) {
      <div
        class="bg-bg-card relative h-[50vh] w-full overflow-hidden rounded-xl md:h-[70vh] md:rounded-2xl lg:h-[80vh]"
      >
        <!-- Shimmer effect loader -->
        <div
          class="absolute inset-0 animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-70"
        ></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <app-loading-dots />
        </div>
      </div>
    } @else if (movies()[0]) {
      <div
        class="group relative h-[50vh] w-full overflow-hidden rounded-xl shadow-2xl sm:h-[55vh] md:h-[70vh] md:rounded-2xl lg:h-[80vh]"
      >
        <!-- Image with preload effect -->
        <div class="bg-bg-card animate-pulse-subtle absolute inset-0"></div>
        <img
          [src]="movies()[0].backdrop"
          [alt]="movies()[0].name"
          class="absolute inset-0 h-full w-full object-cover object-center transition-transform duration-700 group-hover:scale-105"
        />

        <!-- Gradient overlay with subtle vignette -->
        <div
          class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-black/20"
        ></div>

        <!-- Content area with improved positioning and responsiveness -->
        <div
          class="absolute inset-x-0 bottom-0 z-10 p-4 sm:p-6 md:p-10 lg:p-16"
        >
          <div class="max-w-2xl">
            <!-- Badge - e.g. "NEW" or "TRENDING" -->
            <div
              class="bg-primary-500/90 mb-2 inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium uppercase tracking-wide text-white backdrop-blur-sm sm:mb-3 sm:px-3 sm:py-1 sm:text-xs"
            >
              <span
                class="mr-1 flex h-1.5 w-1.5 rounded-full bg-white sm:mr-1.5 sm:h-2 sm:w-2"
              ></span>
              Trending
            </div>

            <!-- Title -->
            <h1
              class="mb-1 text-xl font-bold tracking-tight text-white drop-shadow-lg sm:mb-2 sm:text-2xl md:text-3xl lg:text-5xl"
            >
              {{ movies()[0].name }}
            </h1>

            <!-- Tagline with improved visibility -->
            @if (movies()[0].tagline) {
              <p
                class="mb-2 line-clamp-2 text-sm italic text-white/80 drop-shadow-md sm:mb-3 sm:text-base md:line-clamp-none md:text-lg lg:max-w-xl"
              >
                {{ movies()[0].tagline }}
              </p>
            }

            <!-- Metadata row - hidden on smallest screens -->
            <div
              class="mb-3 hidden flex-wrap items-center gap-x-3 gap-y-1 text-xs text-white/70 sm:mb-4 sm:flex md:mb-6 md:gap-x-4 md:gap-y-2 md:text-sm"
            >
              <div class="flex items-center">
                <svg
                  class="text-primary-500 mr-1 h-3.5 w-3.5 md:h-4 md:w-4"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                  />
                </svg>
                <span>9.2/10</span>
              </div>
              <span class="text-white/40">•</span>
              <span>2024</span>
              <span class="text-white/40">•</span>
              <span class="hidden md:inline">120 min</span>
              <span class="hidden text-white/40 md:inline">•</span>
              <span class="hidden md:inline">Action, Adventure</span>
            </div>

            <!-- Action buttons -->
            <div class="flex flex-wrap items-center gap-2 sm:gap-3 md:gap-4">
              <a
                [routerLink]="['/movie', movies()[0].id]"
                class="flex items-center gap-1 rounded-lg bg-red-600 px-3 py-2 text-xs font-medium text-white shadow-lg shadow-red-600/30 transition-all hover:bg-red-700 hover:shadow-red-600/50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:gap-2 sm:px-4 sm:py-2.5 sm:text-sm md:px-6 md:py-3 md:text-base"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="h-4 w-4 sm:h-5 sm:w-5"
                >
                  <path
                    fill-rule="evenodd"
                    d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z"
                    clip-rule="evenodd"
                  />
                </svg>
                Play
              </a>

              <button
                class="flex items-center gap-1 rounded-lg border border-white/20 bg-white/10 px-3 py-2 text-xs font-medium text-white backdrop-blur-sm transition-all hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 focus:ring-offset-2 sm:gap-2 sm:px-4 sm:py-2.5 sm:text-sm md:px-6 md:py-3 md:text-base"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="h-4 w-4 sm:h-5 sm:w-5"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="hidden sm:inline">My List</span>
                <span class="sm:hidden">Add</span>
              </button>

              <button
                class="flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-white/10 backdrop-blur-sm transition-all hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30 focus:ring-offset-2 sm:h-10 sm:w-10 md:h-11 md:w-11"
                aria-label="More information"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  class="h-4 w-4 sm:h-5 sm:w-5"
                >
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                  <path
                    fill-rule="evenodd"
                    d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    } @else {
      <div
        class="bg-bg-card flex h-[50vh] w-full flex-col items-center justify-center rounded-xl text-white/50 sm:h-[55vh] md:h-[70vh] md:rounded-2xl lg:h-[80vh]"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="mb-4 h-12 w-12 opacity-30 md:h-16 md:w-16"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"
          />
        </svg>
        <p class="mb-4 text-base md:text-lg">Featured content not available</p>
        <a
          [routerLink]="['/movie', 1140]"
          class="text-primary-500 hover:text-primary-400 font-medium transition-colors"
          >Explore recommendations</a
        >
      </div>
    }
  </section>

  <!-- Popular Now Section -->
  <section class="mb-8 sm:mb-10 md:mb-14">
    <div class="mb-3 flex items-center justify-between sm:mb-5">
      <h2 class="text-xl font-semibold text-white sm:text-2xl md:text-3xl">
        Popular Now
      </h2>

      <a
        href="#"
        class="text-primary-500 hover:text-primary-400 hidden text-sm font-medium transition-colors md:block"
        >See All</a
      >
    </div>

    <!-- Add overflow-hidden to this container -->
    <div class="group/carousel relative overflow-hidden">
      <!-- Left Shadow/Overlay - increased width -->
      <div
        class="from-bg-dark pointer-events-none absolute bottom-4 left-0 top-0 z-10 w-12 bg-gradient-to-r to-transparent sm:w-16"
      ></div>

      <!-- Carousel Content - adjusted padding -->
      <div
        class="movie-carousel -mx-2 flex space-x-3 overflow-x-auto scroll-smooth pb-4 pl-4 pr-12 sm:space-x-4 sm:pl-6 sm:pr-16"
      >
        @if (loading()) {
          @for (i of [].constructor(8); track $index) {
            <div
              class="flex w-[130px] flex-shrink-0 flex-col sm:w-[160px] md:w-[200px] lg:w-[240px]"
            >
              <div
                class="bg-bg-card relative aspect-[2/3] w-full overflow-hidden rounded-lg"
              >
                <!-- Shimmer effect -->
                <div
                  class="absolute inset-0 animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent"
                ></div>
              </div>
              <div
                class="bg-bg-card relative mt-3 h-3 w-3/4 overflow-hidden rounded sm:h-4"
              >
                <div
                  class="absolute inset-0 animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent"
                ></div>
              </div>
              <div
                class="bg-bg-card relative mt-2 h-2 w-1/2 overflow-hidden rounded sm:h-3"
              >
                <div
                  class="absolute inset-0 animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent"
                ></div>
              </div>
            </div>
          }
        } @else {
          @for (movie of movies(); track movie.id) {
            <div
              class="group/card flex w-[130px] flex-shrink-0 cursor-pointer flex-col transition-all duration-300 sm:w-[160px] md:w-[200px] lg:w-[240px]"
              [routerLink]="['/movie', movie.id]"
              tabindex="0"
              role="link"
              [attr.aria-label]="movie.name"
            >
              <div
                class="relative aspect-[2/3] w-full overflow-hidden rounded-lg shadow-lg"
              >
                <!-- Poster image with better transitions -->
                <img
                  [src]="movie.poster"
                  [alt]="movie.name"
                  class="h-full w-full object-cover transition-transform duration-500 group-hover/card:scale-105"
                />

                <!-- Gradient overlay with opacity transition -->
                <div
                  class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent opacity-0 transition-opacity duration-300 group-hover/card:opacity-100"
                ></div>

                <!-- Play button overlay -->
                <div
                  class="absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-300 group-hover/card:opacity-100"
                >
                  <div
                    class="rounded-full bg-white/20 p-2 backdrop-blur-sm sm:p-2.5"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                      class="h-6 w-6 text-white sm:h-7 sm:w-7 md:h-8 md:w-8"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                </div>
              </div>

              <!-- Movie info with improved typography -->
              <div class="mt-2 px-0.5 sm:mt-3">
                <h3
                  class="truncate text-xs font-medium text-white sm:text-sm md:text-base"
                  [title]="movie.name"
                >
                  {{ movie.name }}
                </h3>
                <div
                  class="mt-1 flex items-center gap-1 text-[10px] text-white/60 sm:mt-1.5 sm:gap-2 sm:text-xs"
                >
                  <div
                    class="flex items-center gap-0.5 text-yellow-400 sm:gap-1"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 20 20"
                      fill="#ffe234"
                      class="h-2.5 w-2.5 sm:h-3.5 sm:w-3.5"
                    >
                      <path
                        d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                      />
                    </svg>
                    <span>{{ movie.rating }}</span>
                  </div>
                  <span class="text-white/40">•</span>
                  <span>{{ movie.year }}</span>
                </div>
              </div>
            </div>
          }
        }
      </div>

      <!-- Right Shadow/Overlay - increased width -->
      <div
        class="from-bg-dark pointer-events-none absolute bottom-4 right-0 top-0 z-10 w-12 bg-gradient-to-l to-transparent sm:w-16"
      ></div>
    </div>
  </section>
</div>
